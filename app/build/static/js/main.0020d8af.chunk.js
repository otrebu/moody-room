(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{226:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(63),r=a.n(s),i=(a(72),a(4)),c=a(5),l=a(7),m=a(6),u=a(8),d=a(229),p=a(230),h=a(227),v=a(74),g=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"content-container f-text-center"},o.a.createElement("h3",null,"In todays world, humans frequently hide their emotions.",o.a.createElement("br",null),"Lets allow machines to display them for us again...."),o.a.createElement("p",null),o.a.createElement("p",null),o.a.createElement("p",null),o.a.createElement("h5",null,o.a.createElement(v.a,{to:"/current"},"View the current moods")),o.a.createElement("h5",null,o.a.createElement(v.a,{to:"/history"},"View a timelapse of recorded moods"))))}}]),t}(o.a.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.person,t=e.mood,a=e.facialAttributes,n="";return a.hasBeard&&(n+=" has-beard"),a.hasGlasses&&(n+=" has-glasses"),a.hasMoustache&&(n+=" has-moustache"),a.hasSunglasses&&(n+=" has-sunglasses"),o.a.createElement("div",{className:"smiley mood-".concat(t," ").concat(n)},o.a.createElement("div",{className:"face"},o.a.createElement("div",{className:"eye left"},o.a.createElement("svg",{width:"30%",viewBox:"0 0 30 42",className:"tear"},o.a.createElement("path",{fill:"#66b2ff",stroke:"transparent",strokeWidth:"0",d:"M15 3 Q16.5 6.8 25 18 A12.8 12.8 0 1 1 5 18 Q13.5 6.8 15 3z"}))),o.a.createElement("div",{className:"eye right"}),o.a.createElement("div",{className:"mouth"}),o.a.createElement("div",{className:"beard"}),o.a.createElement("div",{className:"moustache left"}),o.a.createElement("div",{className:"moustache right"}),o.a.createElement("div",{className:"glasses eye-glasses"},o.a.createElement("div",{className:"g-top "}),o.a.createElement("div",{className:"g-left glass"}),o.a.createElement("div",{className:"g-right glass"})),o.a.createElement("div",{className:"glasses sunglasses"},o.a.createElement("div",{className:"g-top"}),o.a.createElement("div",{className:"g-left glass"}),o.a.createElement("div",{className:"g-right glass"})),o.a.createElement("div",{className:"eyebrow left"}),o.a.createElement("div",{className:"eyebrow right"})))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={personList:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState(function(e,t){return{personList:t.personList}})}},{key:"componentDidUpdate",value:function(e,t,a){e!==this.props&&this.setState(function(e,t){return{personList:t.personList}})}},{key:"render",value:function(){var e=this.state.personList,t=this.props.hideTimestamp;return o.a.createElement("div",{className:"listing-container"},e&&e.facialAttributes?o.a.createElement("div",{className:"wrapper"},e.timestamp&&!t?o.a.createElement("div",{className:"fw"},o.a.createElement("h5",null,"Time: ",function(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes();n<10&&(n="0"+n);var o="am";return a>12&&(a-=12,o="pm"),a+":"+n+o}(e.timestamp))):null,e.facialAttributes.map(function(e,t){return o.a.createElement(f,{key:t,person:e})})):null)}}]),t}(o.a.Component),b=o.a.createContext({}),N=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(b.Consumer,null,function(e){var t=e.moodSummary,a=t.filter(function(e){return"happy"===e.name})[0],n=a?a.count:0,s=t.filter(function(e){return"sad"===e.name})[0],r=s?s.count:0;return t=t.map(function(e){return"happy"!==e.name&&"sad"!==e.name?e:null}).filter(function(e){return void 0!==e}),o.a.createElement("div",null,o.a.createElement("div",{className:"title-container"},o.a.createElement("h2",null,"Current Moods")),o.a.createElement("div",{className:"content-container"},o.a.createElement("div",null,o.a.createElement("span",{className:"smiley-tag"},"Happy: ",n),o.a.createElement("span",{className:"smiley-tag"},"Sad: ",r),t.map(function(e){return o.a.createElement("span",{key:e.name,className:"smiley-tag"},e.name,": ",e.count)}))),o.a.createElement("div",null,o.a.createElement(E,{personList:e.personList,hideTimestamp:!0})))})}}]),t}(o.a.Component),y=a(75),O=a.n(y),j=a(64),C=a(76),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={hiddenClass:"hidden",moodDataList:[],personList:[],timer:null,timelapseDuration:50,moodLabels:["Happy","Sad","Angry","Surprised","Disgusted","Calm","Confused","Unknown"],moodTotals:[0,0,0,0,0,0,0,0]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark(function e(){var t,a,n,o,s,r,i,c,l,m=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,a=[],n=[],o=this.props.match.params.count||250,e.next=6,fetch("http://api.moodyroom.space/api/moods/last/"+o).then(function(e){return e.json()});case 6:for(null!=(s=e.sent)&&(a=s.moodTimeFrames,n=s.moodTimestampSummary),(r=function(e){t<a.length?m.setState({personList:a[e]}):(t=0,clearInterval(m.state.timer))})(t),this.setState({timer:setInterval(function(){r(++t)},o>50?500:1e3),moodDataList:n}),i=[0,0,0,0,0,0,0,0],console.log("this.state.moodDataList.length",this.state.moodDataList.length),c=0;c<this.state.moodDataList.length;c++)l=n[c],console.log("mood",l),"happy"===l.name&&(i[0]=l.count),"sad"===l.name&&(i[1]=l.count),"angry"===l.name&&(i[2]=l.count),"surprised"===l.name&&(i[3]=l.count),"disgusted"===l.name&&(i[4]=l.count),"calm"===l.name&&(i[5]=l.count),"confused"===l.name&&(i[6]=l.count),"unknown"===l.name&&(i[7]=l.count);this.setState({moodTotals:i});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this.state,t=e.personList,a=e.hiddenClass,n=e.moodTotals,s=e.moodLabels,r=(this.props.match.params.count||250)/2,i={labels:s,datasets:[{label:"Moods",data:n,backgroundColor:["#ffff00","#3366cc","#ff0000","#7303c0","#295e70","#86dcf9","#71b280","#664400"]}],borderWidth:1};return o.a.createElement("div",null,o.a.createElement("h2",null,"History"),o.a.createElement("h4",null,"Timelapse of the last ",r," minutes"),o.a.createElement("div",{className:"content-container ".concat(a)},t?o.a.createElement(E,{personList:t}):null),o.a.createElement("h2",null,"Historical Chart"),o.a.createElement("br",null),o.a.createElement(C.a,{data:i,width:400,height:400}))}}]),t}(o.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={timer:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("button",{className:"btn",onClick:function(e){e.preventDefault(),fetch("https://api.lifx.com/v1/lights/all/effects/pulse",{method:"POST",headers:new Headers({Authorization:"Authorization: Bearer c00033299035cd9fb23d71440b561689301ba07792a4408a20144d0a57f21143","Content-Type":"application/x-www-form-urlencoded"}),data:"period=2 cycles=5 color=green'"}).then(function(e){console.log(e)})}},"Turn light on"))}}]),t}(o.a.Component),L=function(){return o.a.createElement(p.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:g}),o.a.createElement(h.a,{exact:!0,path:"/current",component:N}),o.a.createElement(h.a,{exact:!0,path:"/history/",component:w}),o.a.createElement(h.a,{exact:!0,path:"/history/:count",component:w}),o.a.createElement(h.a,{exact:!0,path:"/settings",component:k}))},S=a(228),D=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleNavigation,a=e.iconClassName;return o.a.createElement("header",null,o.a.createElement("div",{className:"menu-trigger",onClick:t},o.a.createElement("i",{className:"far "+a})),o.a.createElement("div",{className:"logo"},o.a.createElement(S.a,{to:"/"},o.a.createElement("h4",null,"Moody Room"))))}}]),t}(o.a.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleNavigation,a=e.navigationClass;return o.a.createElement("div",null,o.a.createElement("div",{className:"navigation ".concat(a)},o.a.createElement("h2",null,o.a.createElement(S.a,{to:"/",onClick:t},"Home")),o.a.createElement("h2",null,o.a.createElement(S.a,{to:"/current",onClick:t},"Current")),o.a.createElement("h2",null,o.a.createElement(S.a,{to:"/history",activeClassName:"active",onClick:t},"History"))))}}]),t}(o.a.Component),M={navigation:{isOpen:!1,icon:{openedClassName:"fa-times",closedClassName:"fa-bars"},container:{openedClassName:"open",closedClassName:""}},moods:{happy:"bg-happy",sad:"bg-sad",angry:"bg-angry",confused:"bg-confused",disgusted:"bg-disgusted",surprised:"bg-surprised",calm:"bg-calm",unknown:"bg-unknown"},toggleNavigationHandler:function(){}},T=(o.a.createContext(M.moods.happys),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={isNavigationOpen:M.navigation.isOpen,navigationClassName:M.navigation.container.closedClassName,iconClassName:M.navigation.icon.closedClassName,appStore:{},timer:null,isDataLoaded:!1,currentMoodTimer:null},a.toggleNavigation=function(){a.setState(function(e){return{isNavigationOpen:!e.isNavigationOpen,navigationClassName:e.isNavigationOpen?M.navigation.container.closedClassName:M.navigation.container.openedClassName,iconClassName:e.isNavigationOpen?M.navigation.icon.closedClassName:M.navigation.icon.openedClassName}})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(){return fetch("http://api.moodyroom.space/api/moods/current/").then(function(e){return 200===e.status?e.json():null}).then(function(t){if(null!=t){var a=t.moodSummary,n=t.commonMood?t.commonMood.name:"unknown",o=t;e.setState({appStore:{commonMoodName:n,moodSummary:a,personList:o},isDataLoaded:!0})}})};t(),this.setState({timer:setInterval(function(){t(),console.log("get again")},15e3)})}},{key:"render",value:function(){var e=this.state,t=e.appStore,a=e.iconClassName,n=e.navigationClassName,s=e.isDataLoaded,r=t.commonMoodName;return o.a.createElement(d.a,null,o.a.createElement(b.Provider,{value:t},o.a.createElement("div",{className:"App bg-".concat(r||"unknown")},o.a.createElement(D,{toggleNavigation:this.toggleNavigation,iconClassName:a}),o.a.createElement(x,{toggleNavigation:this.toggleNavigation,navigationClass:n}),o.a.createElement("div",{className:"main-content"},s?o.a.createElement(L,null):null))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,a){e.exports=a(226)},72:function(e,t,a){}},[[67,2,1]]]);
//# sourceMappingURL=main.0020d8af.chunk.js.map